<view class="page"><hx-navbar vue-id="42aadf20-1" title="{{editFlag==true?'编辑竞赛':'发布竞赛'}}" color="#ffffff" background-color-linear-deg="45" bind:__l="__l"></hx-navbar><view class="bg-white" style="padding:20rpx 0;"><view class="cu-steps"><block wx:for="{{stepList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['cu-item',index>stepActive?'':'text-green']}}"><text class="{{[index>stepActive?'cuIcon-title':'cuIcon-'+item.cuIcon]}}"></text>{{''+item.name+''}}</view></block></view></view><block wx:if="{{stepActive==0}}"><view class="post-box1"><view class="cu-form-group"><view class="title required">竞赛名称</view><input placeholder="请输入竞赛名称" data-event-opts="{{[['input',[['__set_model',['','name','$event',[]]]]]]}}" value="{{name}}" bindinput="__e"/><block wx:if="{{name.length!=0}}"><text data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title required">主办方</view><input placeholder="请输入主办方名称, 如软件学院" data-event-opts="{{[['input',[['__set_model',['','source','$event',[]]]]]]}}" value="{{source}}" bindinput="__e"/><block wx:if="{{source.length!=0}}"><text data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title">通知链接</view><input placeholder="请输入通知链接" data-event-opts="{{[['input',[['__set_model',['','url','$event',[]]]]]]}}" value="{{url}}" bindinput="__e"/><block wx:if="{{url.length!=0}}"><text data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title">报名链接</view><input placeholder="请输入报名链接" data-event-opts="{{[['input',[['__set_model',['','registerUrl','$event',[]]]]]]}}" value="{{registerUrl}}" bindinput="__e"/><block wx:if="{{registerUrl.length!=0}}"><text data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title">官方群</view><input placeholder="如:QQ群123456" data-event-opts="{{[['input',[['__set_model',['','contact','$event',[]]]]]]}}" value="{{contact}}" bindinput="__e"/><block wx:if="{{contact.length!=0}}"><text data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="margin-top10"><view class="cu-form-group" style="display:flex;"><view class="title required">竞赛级别</view><input readonly disabled placeholder="请选择竞赛级别" data-event-opts="{{[['tap',[['e5',['$event']]]]]}}" value="{{gameTypeList[gameType-1]}}" bindtap="__e"/><text class="cuIcon-right"></text></view><van-popup vue-id="42aadf20-2" show="{{popupTypeFlag}}" position="bottom" data-event-opts="{{[['^close',[['e6']]]]}}" data-com-type="wx" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><van-picker vue-id="{{('42aadf20-3')+','+('42aadf20-2')}}" columns="{{gameTypeList}}" show-toolbar value-key="name" data-event-opts="{{[['^cancel',[['closeTypePopup']]],['^confirm',[['chooseType']]]]}}" data-com-type="wx" bind:cancel="__e" bind:confirm="__e" bind:__l="__l"></van-picker></van-popup></view><view><view class="cu-form-group" style="display:flex;"><view class="title required">竞赛类别</view><input readonly disabled placeholder="请选择竞赛类别" data-event-opts="{{[['tap',[['e7',['$event']]]]]}}" value="{{category.category}}" bindtap="__e"/><text class="cuIcon-right"></text></view><van-popup vue-id="42aadf20-4" show="{{popupKindFlag}}" position="bottom" data-event-opts="{{[['^close',[['e8']]]]}}" data-com-type="wx" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><van-picker vue-id="{{('42aadf20-5')+','+('42aadf20-4')}}" columns="{{categories}}" show-toolbar value-key="name" data-event-opts="{{[['^cancel',[['closeKindPopup']]],['^confirm',[['chooseKind']]]]}}" data-com-type="wx" bind:cancel="__e" bind:confirm="__e" bind:__l="__l"></van-picker></van-popup></view><view class="margin-top10 way-box"><view class="way-tit"><text>比赛方式</text></view><view class="way-radios"><van-radio-group vue-id="42aadf20-6" value="{{gameWayRadio}}" data-event-opts="{{[['^change',[['onChangeGameWay']]]]}}" data-com-type="wx" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><van-radio vue-id="{{('42aadf20-7')+','+('42aadf20-6')}}" name="1" checked-color="#07c160" data-com-type="wx" bind:__l="__l" vue-slots="{{['default']}}">个人赛</van-radio><van-radio vue-id="{{('42aadf20-8')+','+('42aadf20-6')}}" name="2" checked-color="#07c160" data-com-type="wx" bind:__l="__l" vue-slots="{{['default']}}">团体赛</van-radio></van-radio-group></view></view><block wx:if="{{membersShowFlag}}"><view class="margin-top10 way-box"><view class="way-tit"><text>队伍规模</text></view><view class="members"><uni-number-box vue-id="42aadf20-9" min="{{1}}" max="{{15}}" value="{{num}}" data-event-opts="{{[['^change',[['change']]]]}}" bind:change="__e" bind:__l="__l"></uni-number-box></view></view></block><view class="time-box margin-top10"><view class="cu-form-group"><view class="title required">报名时间</view><picker mode="date" value="{{date1}}" start="{{startTime}}" end="{{endTime}}" data-event-opts="{{[['change',[['Date1Change',['$event']]]]]}}" bindchange="__e"><view style="color:#7d7d7d;text-align:center;">{{date1||'请选择'}}</view></picker><text style="text-align:left;">至</text><picker mode="date" value="{{date2}}" start="{{startTime}}" end="{{endTime}}" data-event-opts="{{[['change',[['Date2Change',['$event']]]]]}}" bindchange="__e"><view style="color:#7d7d7d;text-align:right;">{{date2||'请选择'}}</view></picker></view><view class="cu-form-group"><view class="title required">比赛时间</view><picker mode="date" value="{{date1}}" start="{{startTime}}" end="{{endTime}}" data-event-opts="{{[['change',[['Date3Change',['$event']]]]]}}" bindchange="__e"><view style="color:#7d7d7d;text-align:center;">{{date3||'请选择'}}</view></picker><text style="text-align:left;">至</text><picker mode="date" value="{{date4}}" start="{{startTime}}" end="{{endTime}}" data-event-opts="{{[['change',[['Date4Change',['$event']]]]]}}" bindchange="__e"><view style="color:#7d7d7d;text-align:right;">{{date4||'请选择'}}</view></picker></view><view class="post-tip margin-top10" style="margin-left:20rpx;"><text style="color:#f00;margin-right:15rpx;">*</text><text>{{'时间待定请选择'+startTime}}</text></view></view></view></block><block wx:if="{{stepActive==1}}"><view class="post-box2 margin-top10"><my-editor vue-id="42aadf20-10" html="{{gameContent}}" data-event-opts="{{[['^save',[['saveEditor']]],['^reset',[['resetEditor']]]]}}" bind:save="__e" bind:reset="__e" bind:__l="__l"></my-editor></view></block><block wx:if="{{stepActive==2}}"><view class="post-box3"><block wx:if="{{$root.m0}}"><view class="box3-uploadPic-box"><view class="uploadPic-tit required">上传图片</view><view class="box3-uploadPic"><van-uploader vue-id="42aadf20-11" sizeType="compressed" preview-full-image upload-text="上传竞赛海报" max-count="1" file-list="{{picList}}" data-event-opts="{{[['^afterRead',[['afterReadPic']]]]}}" data-com-type="wx" bind:afterRead="__e" bind:__l="__l"></van-uploader></view></view></block><block wx:if="{{!$root.m1}}"><view><uni-swipe-action vue-id="42aadf20-12" bind:__l="__l" vue-slots="{{['default']}}"><uni-swipe-action-item vue-id="{{('42aadf20-13')+','+('42aadf20-12')}}" options="{{options}}" data-event-opts="{{[['^click',[['previewOnClick']]],['^change',[['previewChange']]]]}}" bind:click="__e" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="preview-picture animated bounceInRight"><image src="{{picList}}" alt class="_img"></image></view></uni-swipe-action-item></uni-swipe-action><view style="text-align:right;margin-top:5rpx;">（滑动删除）</view></view></block><view class="box3-tagBox margin-top20"><view class="tagBox-add"><dynamic-tags vue-id="42aadf20-14" value="{{tagList}}" maxTag="3" enable-del="{{enableDel}}" enable-add="{{enableAdd}}" data-event-opts="{{[['^add',[['addTag']]],['^delete',[['delTag']]]]}}" bind:add="__e" bind:delete="__e" bind:__l="__l"></dynamic-tags></view></view></view></block><view class="box4 margin-top10"><block wx:if="{{stepActive==3}}"><view><k-game-detail vue-id="42aadf20-15" list="{{games}}" poster="{{poster}}" isPreview="true" bind:__l="__l"></k-game-detail></view></block></view><view class="foot"><block wx:if="{{stepActive!=3}}"><view class="foot-option"><block wx:if="{{stepActive!=0&&stepActive!=3}}"><view data-event-opts="{{[['tap',[['lastStep',['$event']]]]]}}" class="option-item item-return" bindtap="__e"><text class="cuIcon-back"></text><text>返回</text></view></block><block wx:if="{{stepActive<2}}"><view data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" class="option-item item-next" bindtap="__e"><text>下一步</text><text class="cuIcon-right"></text></view></block><block wx:if="{{stepActive==2}}"><view data-event-opts="{{[['tap',[['postGame',['$event']]]]]}}" class="option-item item-next" bindtap="__e"><text>发布</text><text class="cuIcon-right"></text></view></block></view></block><block wx:if="{{stepActive==3}}"><view class="padding flex flex-direction op-group"><button data-event-opts="{{[['tap',[['editGame',['$event']]]]]}}" class="cu-btn lg bg-grey" style="color:#fff;" bindtap="__e">编辑</button><button data-event-opts="{{[['tap',[['deleteGame',['$event']]]]]}}" class="cu-btn lg bg-red" style="color:#fff;" bindtap="__e">删除</button><button data-event-opts="{{[['tap',[['finsh',['$event']]]]]}}" class="cu-btn lg" style="background-color:#55aaff;color:#fff;" bindtap="__e">完成</button></view></block></view></view>