(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/team/team-list"],{"28d7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){n.e("components/other/drag-button/drag-button").then(function(){return resolve(n("1fc2"))}.bind(null,n)).catch(n.oe)},a=function(){n.e("components/uni-ui/uni-collapse/uni-collapse").then(function(){return resolve(n("6763"))}.bind(null,n)).catch(n.oe)},o=function(){n.e("components/uni-ui/uni-collapse-item/uni-collapse-item").then(function(){return resolve(n("7c54"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/uni-ui/uni-card/uni-card").then(function(){return resolve(n("3b5c"))}.bind(null,n)).catch(n.oe)},u={components:{dragButton:i,uniCollapse:a,uniCollapseItem:o,uniCard:r},data:function(){return{isShow:!1}},methods:{showModal:function(t){this.isShow=!0},hideModal:function(t){this.isShow=!1,this.onClick()},btnClick:function(){this.isShow=!0,this.onClick()},btnTouchstart:function(){},btnTouchend:function(){},onClick:function(){this.$emit("click",this.isShow)}}};e.default=u},"55f6":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},"627d":function(t,e,n){"use strict";n.r(e);var i=n("8da6"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"6d29":function(t,e,n){"use strict";var i=n("d124"),a=n.n(i);a.a},"89a4":function(t,e,n){"use strict";n.r(e);var i=n("9f28"),a=n("627d");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("a2eb");var r,u=n("f0c5"),s=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=s.exports},"8da6":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a")),a=r(n("ac94")),o=n("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,i,a,o,r){try{var u=t[o](r),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(i,a)}function s(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){u(o,i,a,r,s,"next",t)}function s(t){u(o,i,a,r,s,"throw",t)}r(void 0)}))}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){n.e("components/k-ui/k-team/k-team").then(function(){return resolve(n("5682"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/uni-ui/uni-number-box/uni-number-box").then(function(){return resolve(n("551e"))}.bind(null,n)).catch(n.oe)},p={components:{kTeam:d,uniNumberBox:h,kManualTeam:a.default},data:function(){return{user:"",datas:[],modalName:"",teamName:"",contact:"",teamBrief:"",currGameId:"",need:1,teamSize:"",createBtnShow:!0}},mounted:function(){this.user=this.$store.getters.getUserInfo},computed:l({},(0,o.mapState)(["hasLogin","userInfo"])),onLoad:function(e){console.log(e),t.showLoading({title:"正在加载"}),this.currGameId=e.id,this.teamSize=e.teamSize,this.loadData()},methods:{test:function(){console.log(this.user),this.isBoundWx()},manualClick:function(t){this.createBtnShow=!t,this.hideModal()},needChange:function(t){this.need=t,t==this.teamSize&&this.$api.msg("已达人数上限~")},goTeamDetail:function(e){t.navigateTo({url:"/pages/team/my-team-detail?id="+e})},complete:function(e){t.showModal({title:"提示",content:e,showCancel:!0,confirmText:"去设置",success:function(e){e.confirm&&t.navigateTo({url:"/pages/set/personInfo/personInfo"})}})},showModal:function(t){""!=this.user.contact?(this.modalName=t.currentTarget.dataset.target,console.log(t.currentTarget.dataset.target)):this.complete("请完善您的联系方式~")},hideModal:function(t){this.modalName="",this.teamName="",this.teamBrief="",this.contact=""},createModal:function(){""!=this.teamName&&""!=this.teamBrief&&""!=this.contact?(this.create(),this.hideModal()):this.$api.msg("请完善信息~")},isBoundWx:function(){var e=s(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.request({url:"/isBoundWx/"+this.user.id});case 2:n=e.sent,console.log(n),0==n.data.isBoundWeChat&&t.showModal({title:"提示",content:"检测到您未关注‘i瓜大’公众号，无法为您推送组队信息",showCancel:!1,confirmText:"知道了",confirmColor:"#8c8b83",success:function(t){}});case 5:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),create:function(){var e=s(i.default.mark((function e(){var n,a=this;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.request({url:"/team/create",method:"POST",contentType:"application/json",data:{userId:this.user.id,gameId:this.currGameId,name:this.teamName,contact:this.contact,size:this.need,brief:this.teamBrief}});case 2:n=e.sent,200==n.status?(this.loadData(),t.showToast({title:"创建成功~"}),setTimeout((function(){a.isBoundWx()}),1500)):n.status.startsWith("1000")?this.$api.msg(n.msg):this.$api.msg("服务器正忙~"),console.log(n);case 5:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),loadData:function(){var e=s(i.default.mark((function e(){var n;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.request({url:"/team/"+this.currGameId});case 2:n=e.sent,this.datas=n.data,console.log(n),t.hideLoading();case 6:case"end":return e.stop()}}),e,this)})));function n(){return e.apply(this,arguments)}return n}(),goUserDetail:function(e){t.navigateTo({url:"/pages/person/person-detail?id="+e})},unApply:function(){var e=s(i.default.mark((function e(n){var a;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.request({url:"/team/unApply/"+n});case 2:a=e.sent,200==a.status?(this.loadData(),t.showToast({title:"取消成功~"})):this.$api.msg(a.msg);case 4:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}(),apply:function(){var e=s(i.default.mark((function e(n){var a;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.request({url:"/team/apply/"+n});case 2:a=e.sent,200==a.status?(this.loadData(),t.showToast({title:"申请成功~"})):this.$api.msg(a.msg);case 4:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}(),quit:function(e){var n=this;t.showModal({title:"退出提示",content:"您确定退出队伍吗？",showCancel:!0,confirmText:"确定",success:function(t){t.confirm&&n.unApply(e)}})},navTo:function(e){t.navigateTo({url:e})},btnClick:function(){this.$refs.kManualTeam.showModal()},btnTouchstart:function(){},btnTouchend:function(){}},onPullDownRefresh:function(){t.showLoading({title:"正在加载"}),this.datas=[],this.loadData(),setTimeout((function(){t.stopPullDownRefresh(),t.showToast({title:"刷新成功"})}),1e3)}};e.default=p}).call(this,n("543d")["default"])},9159:function(t,e,n){},"9f28":function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}))},a2eb:function(t,e,n){"use strict";var i=n("9159"),a=n.n(i);a.a},a39e:function(t,e,n){"use strict";n.r(e);var i=n("28d7"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},aa4b:function(t,e,n){"use strict";(function(t){n("1a2d"),n("921b");i(n("66fd"));var e=i(n("89a4"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},ac94:function(t,e,n){"use strict";n.r(e);var i=n("55f6"),a=n("a39e");for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("6d29");var r,u=n("f0c5"),s=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"70862458",null,!1,i["a"],r);e["default"]=s.exports},d124:function(t,e,n){}},[["aa4b","common/runtime","common/vendor"]]]);