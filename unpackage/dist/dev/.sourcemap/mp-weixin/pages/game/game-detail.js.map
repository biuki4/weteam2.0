{"version":3,"sources":["webpack:///K:/HBuilderX/project/WeTeam/main.js","webpack:///K:/HBuilderX/project/WeTeam/pages/game/game-detail.vue?9736","webpack:///K:/HBuilderX/project/WeTeam/pages/game/game-detail.vue?929c","webpack:///K:/HBuilderX/project/WeTeam/pages/game/game-detail.vue?2d6d","webpack:///K:/HBuilderX/project/WeTeam/pages/game/game-detail.vue?5e47","webpack:///K:/HBuilderX/project/WeTeam/pages/game/game-detail.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","kGameDetail","data","games","poster","isCollect","currGameId","user","mounted","$store","getters","getUserInfo","onLoad","id","loadData","methods","undefined","uni","navigateBack","$api","request","url","res","console","log","status","startsWith","msg","setTimeout","game","collect","unCollect","goCollect","deleteGame","userType","_this","showModal","title","content","showCancel","confirmText","success","e","confirm","showLoading","delete","prePage","hideLoading","editGame","navigateTo","participate","flag","$common","greater","Date","registerEndTime","teamSize","navTo","onShareAppMessage","gameName","onPullDownRefresh","stopPullDownRefresh","showToast"],"mappings":"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","file":"pages/game/game-detail.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/game/game-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./game-detail.vue?vue&type=template&id=67d38dea&\"\nvar renderjs\nimport script from \"./game-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./game-detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"project/WeTeam/pages/game/game-detail.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game-detail.vue?vue&type=template&id=67d38dea&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./game-detail.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport kGameDetail from '@/components/k-ui/k-game-detail/k-game-detail.vue'\nexport default {\n\tcomponents: {\n\t\tkGameDetail\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tgames: [],\n\t\t\tposter:[],\n\t\t\tisCollect: false,\n\t\t\tcurrGameId: '',\n\t\t\tuser: ''\n\t\t}\n\t},\n\tmounted() {\n\t    this.user = this.$store.getters.getUserInfo\n\t},\n\tonLoad(options) {\n\t\tthis.currGameId = options.id\n\t\tthis.loadData()\n\t},\n\tmethods: {\n\t\tasync loadData() {\n\t\t\tif(this.currGameId==undefined || this.currGameId ==\"\") {\n\t\t\t\tuni.navigateBack()\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// console.log(\"gameList: \" + this.currentPage)\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/game/' + this.currGameId,\n\t\t\t})\n\t\t\tconsole.log(res)\n\t\t\tif(res.status.startsWith(\"3000\")) {\n\t\t\t\tthis.$api.msg(res.msg)\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}, 2000)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.games = res.data.game\n\t\t\tthis.poster[0] = res.data.poster\n\t\t\tthis.isCollect = res.data.isCollect\n\t\t\t// console.log(this.games)\n\t\t\t// console.log(this.poster)\n\t\t\t// console.log(res)\n\t\t},\n\t\tcollect(id){\n\t\t\tconsole.log(id)\n\t\t\tif(this.isCollect==true){\n\t\t\t\tthis.unCollect(this.games.id)\n\t\t\t\tthis.$api.msg(\"取消成功\")\n\t\t\t}else {\n\t\t\t\tthis.goCollect(this.games.id)\n\t\t\t\tthis.$api.msg(\"收藏成功\")\n\t\t\t}\n\t\t\tthis.isCollect = !this.isCollect\n\t\t},\n\t\tasync goCollect(id) {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/game/collect/' + id\n\t\t\t})\n\t\t},\n\t\tasync unCollect(id) {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/game/unCollect/' + id\n\t\t\t})\t\t\n\t\t},\n\t\tdeleteGame() {\n\t\t\tif(this.user.id!=this.poster[0].id && this.user.userType!=0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '权限不足，仅能删除您发布的竞赛~',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '返回',\n\t\t\t\t\tsuccess: (e) => {\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst _this = this\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '删除提示',\n\t\t\t\tcontent: '删除不可恢复，确定删除吗？',\n\t\t\t\tshowCancel: true,\n\t\t\t\tconfirmText: '删除',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle:'删除中...'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t_this.delete()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\t\n\t\t},\n\t\tasync delete(){\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/game/delete/' + this.currGameId\n\t\t\t})\n\t\t\tif (this.$api.prePage().loadData) {\n\t\t\t\tthis.$api.prePage().loadData(\"refresh\")\n\t\t\t}\n\t\t\tuni.hideLoading()\n\t\t\tif(res.status == 200){\n\t\t\t\tthis.$api.msg(\"删除成功\")\n\t\t\t\tuni.navigateBack()\n\t\t\t} else if(res.status == 2001 || res.status == 2002){\n\t\t\t\tthis.$api.msg(res.msg)\n\t\t\t} else {\n\t\t\t\tthis.$api.msg(\"系统繁忙\")\n\t\t\t}\n\t\t\t\n\t\t},\n\t\teditGame(){\n\t\t\tif(this.user.id!=this.poster[0].id && this.user.userType!=0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '权限不足，仅能编辑您发布的竞赛~',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '返回',\n\t\t\t\t\tsuccess: (e) => {\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst _this = this\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '编辑提示',\n\t\t\t\tcontent: '您确定要编辑该竞赛吗？',\n\t\t\t\tshowCancel: true,\n\t\t\t\tconfirmText: '确定',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: '/pages/admin/post-game?id=' + _this.currGameId\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tparticipate(){\n\t\t\tconst flag = this.$common.greater(new Date(), new Date(this.games.registerEndTime))\n\t\t\tconsole.log(flag)\n\t\t\tif(flag) {\n\t\t\t\tthis.$api.msg(\"报名已结束\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconsole.log(this.games.teamSize)\n\t\t\tif(this.games.teamSize <= 1) {\n\t\t\t\tthis.$api.msg(\"该竞赛为个人赛\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.navTo(\"/pages/team/team-list?id=\" + this.currGameId + \"&&teamSize=\" + this.games.teamSize)\n\t\t},\n\t\tnavTo(url) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl\n\t\t\t})\n\t\t},\n\t},\n\tonShareAppMessage() {\n\t\treturn {\n\t\t\ttitle: this.games.gameName\n\t\t}\n\t},\n\t//下拉刷新\n\tonPullDownRefresh() {\n\t\tuni.showLoading({\n\t\t\ttitle: '正在加载'\n\t\t})\n\t\tthis.loadData()\n\t\tsetTimeout(()=>{\n\t\t\tuni.stopPullDownRefresh();\n\t\t\tuni.showToast({\n\t\t\t\ttitle:'刷新成功'\n\t\t\t})\n\t\t}, 1000)\n\t\t\n\t},\n}\n"],"sourceRoot":""}