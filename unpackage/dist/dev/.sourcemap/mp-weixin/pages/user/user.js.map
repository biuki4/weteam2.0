{"version":3,"sources":["webpack:///K:/HBuilderX/project/WeTeam/main.js","webpack:///K:/HBuilderX/project/WeTeam/pages/user/user.vue?ea86","webpack:///K:/HBuilderX/project/WeTeam/pages/user/user.vue?a3ff","webpack:///K:/HBuilderX/project/WeTeam/pages/user/user.vue?7015","webpack:///K:/HBuilderX/project/WeTeam/pages/user/user.vue?0f6a","webpack:///K:/HBuilderX/project/WeTeam/pages/user/user.vue","webpack:///K:/HBuilderX/project/WeTeam/pages/user/user.vue?2721"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","startY","moveY","pageAtTop","listCell","data","coverTransform","coverTransition","moving","attention","fans","user","onLoad","updateUser","setInterval","computed","mapState","onShow","isLogin","undefined","$store","getters","getUserInfo","methods","getUser","$api","request","url","isShowLoading","res","console","log","uni","hideLoading","status","startsWith","goLogin","msg","isBoundWeChat","tip","showModal","title","content","showCancel","confirmText","success","e","confirm","navigateTo","commit","getFanNum","getAttentionNum","toLogin","hasLogin","navTo","coverTouchstart","touches","clientY","coverTouchmove","moveDistance","coverTouchend","onNavigationBarButtonTap","index","switchTab","onPullDownRefresh","setTimeout","stopPullDownRefresh"],"mappings":"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","file":"pages/user/user.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/user/user.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user.vue?vue&type=template&id=95a8cdb8&\"\nvar renderjs\nimport script from \"./user.vue?vue&type=script&lang=js&\"\nexport * from \"./user.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"project/WeTeam/pages/user/user.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=template&id=95a8cdb8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport listCell from '@/components/mix-list-cell';\nimport {\n\tmapState\n} from 'vuex';\nlet startY = 100,\n\tmoveY = 0,\n\tpageAtTop = true;\nexport default {\n\tcomponents: {\n\t\tlistCell\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tcoverTransform: 'translateY(0px)',\n\t\t\tcoverTransition: '0s',\n\t\t\tmoving: false,\n\t\t\t// 关注\n\t\t\tattention: '',\n\t\t\t// 粉丝\n\t\t\tfans: '',\n\t\t\tuser: ''\n\t\t}\n\t},\n\t// mounted() {\n\t\t// this.updateUser()\n\t// },\n\tonLoad() {\n\t\tthis.updateUser()\n\t\tsetInterval(()=>{\n\t\t\t// console.log(\"自动更新\")\n\t\t\tthis.updateUser()\n\t\t},1000*60*5);\n\t},\n\tcomputed: {\n\t\t...mapState(['hasLogin', 'userInfo']),\n\t},\n\tonShow() {\n\t\tthis.isLogin()\n\t\tif(this.user==undefined || this.user=='') {\n\t\t\tthis.user = this.$store.getters.getUserInfo\n\t\t}\n\t},\n\tmethods: {\n\t\tupdateUser(){\n\t\t\tthis.user = this.$store.getters.getUserInfo\n\t\t\tif (this.user!=undefined && this.user != '') {\n\t\t\t\tthis.getUser()\n\t\t\t}\n\t\t},\n\t\tasync isLogin() {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/isLogin',\n\t\t\t\tisShowLoading: false\n\t\t\t})\n\t\t\tconsole.log(res)\n\t\t\tuni.hideLoading()\n\t\t\tif(res.status.startsWith(\"5000\")) {\n\t\t\t\tif(res.status == \"50001\") {\n\t\t\t\t\tthis.goLogin('您尚未登录，是否立即登录？')\n\t\t\t\t} else {\n\t\t\t\t\tthis.goLogin(res.msg)\n\t\t\t\t}\t\n\t\t\t\treturn\n\t\t\t}\n\t\t\t// console.log(\"res.data.isBoundWeChat: \" + res.data.isBoundWeChat)\n\t\t\t// console.log(this.user)\n\t\t\t// console.log(\"this.user.isBoundWeChat: \" + this.user.isBoundWeChat )\n\t\t\tif(this.user!=undefined && this.user!='') {\n\t\t\t\tif(res.data.isBoundWeChat != this.user.isBoundWeChat) {\n\t\t\t\t\tconsole.log(\"有更新\")\n\t\t\t\t\tthis.updateUser()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tgoLogin(tip = '') {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '登录提示',\n\t\t\t\tcontent: tip,\n\t\t\t\tshowCancel: true,\n\t\t\t\tconfirmText: '登录',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: '/pages/public/login'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync getUser() {\n\t\t\tif (this.user != null && this.user != 'undefined' && this.user != '') {\n\t\t\t\tconst res = await this.$api.request({\n\t\t\t\t\turl: '/user/getMyInfo',\n\t\t\t\t\tisShowLoading: false\n\t\t\t\t})\n\t\t\t\tconsole.log(this.user)\n\t\t\t\tconsole.log(res.data)\n\t\t\t\tconsole.log(res)\n\t\t\t\tthis.user = res.data\n\t\t\t\tthis.$store.commit(\"updateUserInfo\", res.data)\n\t\t\t}\n\t\t},\n\t\tasync getFanNum() {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/user/countFans'\n\t\t\t})\n\t\t\t// console.log(\"fans\")\n\t\t\t// console.log(res)\n\t\t\tthis.fans = res.data\n\t\t},\n\t\tasync getAttentionNum() {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/user/countAttentions'\n\t\t\t})\n\t\t\tconsole.log(\"attention\")\n\t\t\t// console.log(res)\n\t\t\tthis.attention = res.data\n\n\t\t},\n\t\ttoLogin() {\n\t\t\tif (!this.hasLogin) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/public/login'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * 统一跳转接口,拦截未登录路由\n\t\t * navigator标签现在默认没有转场动画，所以用view\n\t\t */\n\t\tnavTo(url) {\n\t\t\tif (!this.hasLogin) {\n\t\t\t\turl = '/pages/public/login';\n\t\t\t}\n\t\t\tuni.navigateTo({\n\t\t\t\turl\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t *  会员卡下拉和回弹\n\t\t *  1.关闭bounce避免ios端下拉冲突\n\t\t *  2.由于touchmove事件的缺陷（以前做小程序就遇到，比如20跳到40，h5反而好很多），下拉的时候会有掉帧的感觉\n\t\t *    transition设置0.1秒延迟，让css来过渡这段空窗期\n\t\t *  3.回弹效果可修改曲线值来调整效果，推荐一个好用的bezier生成工具 http://cubic-bezier.com/\n\t\t */\n\t\tcoverTouchstart(e) {\n\t\t\tif (pageAtTop === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.coverTransition = 'transform .1s linear';\n\t\t\tstartY = e.touches[0].clientY;\n\t\t},\n\t\tcoverTouchmove(e) {\n\t\t\tmoveY = e.touches[0].clientY;\n\t\t\tlet moveDistance = moveY - startY;\n\t\t\tif (moveDistance < 0) {\n\t\t\t\tthis.moving = false;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.moving = true;\n\t\t\tif (moveDistance >= 80 && moveDistance < 100) {\n\t\t\t\tmoveDistance = 80;\n\t\t\t}\n\n\t\t\tif (moveDistance > 0 && moveDistance <= 80) {\n\t\t\t\tthis.coverTransform = `translateY(${moveDistance}px)`;\n\t\t\t}\n\t\t},\n\t\tcoverTouchend() {\n\t\t\tif (this.moving === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.moving = false;\n\t\t\tthis.coverTransition = 'transform 0.3s cubic-bezier(.21,1.93,.53,.64)';\n\t\t\tthis.coverTransform = 'translateY(0px)';\n\t\t}\n\t},\n\tonNavigationBarButtonTap(e) {\n\t\tconst index = e.index;\n\t\tif (index === 0) {\n\t\t\tthis.navTo('/pages/set/set');\n\t\t} else if (index === 1) {\n\n\n\n\n\n\n\n\n\t\t\t// uni.navigateTo({\n\t\t\t// \turl: '/pages/notice/notice'\n\t\t\t// })\n\t\t\tuni.switchTab({\n\t\t\t\turl: '/pages/notice/notice'\n\t\t\t})\n\t\t}\n\t},\n\tonPullDownRefresh() {\n\t\tthis.getUser()\n\t\tsetTimeout(() => {\n\t\t\tuni.stopPullDownRefresh();\n\t\t}, 1000)\n\t},\n}\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}