{"version":3,"sources":["webpack:///K:/HBuilderX/project/WeTeam/main.js","webpack:///K:/HBuilderX/project/WeTeam/pages/activity/detail.vue?f23c","webpack:///K:/HBuilderX/project/WeTeam/pages/activity/detail.vue?1e4e","webpack:///K:/HBuilderX/project/WeTeam/pages/activity/detail.vue?9c98","webpack:///K:/HBuilderX/project/WeTeam/pages/activity/detail.vue?d1cd","webpack:///K:/HBuilderX/project/WeTeam/pages/activity/detail.vue"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","kDetail","data","activity","poster","isCollect","currActivityId","user","mounted","$store","getters","getUserInfo","onLoad","id","loadData","methods","undefined","uni","navigateBack","$api","request","url","res","console","log","status","startsWith","msg","setTimeout","collect","unCollect","showToast","title","goCollect","deleteActivity","userType","_this","showModal","content","showCancel","confirmText","success","e","confirm","showLoading","delete","prePage","hideLoading","editActivity","navigateTo","participate","flag","$common","greater","Date","registerEndTime","teamSize","navTo","onPullDownRefresh","stopPullDownRefresh","onShareAppMessage","activityName"],"mappings":"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","file":"pages/activity/detail.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/activity/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=76c6a626&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"project/WeTeam/pages/activity/detail.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=76c6a626&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport kDetail from '@/components/k-ui/k-activity/k-detail.vue'\nexport default {\n\tcomponents: {\n\t\tkDetail\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tactivity: [],\n\t\t\tposter: [],\n\t\t\tisCollect: false,\n\t\t\tcurrActivityId: '',\n\t\t\tuser: ''\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.user = this.$store.getters.getUserInfo\n\t},\n\tonLoad(options) {\n\t\tthis.currActivityId = options.id\n\t\tthis.loadData()\n\t},\n\tmethods: {\n\t\tasync loadData() {\n\t\t\tif(this.currActivityId==undefined || this.currActivityId==\"\") {\n\t\t\t\tuni.navigateBack()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/activity/' + this.currActivityId,\n\t\t\t})\n\t\t\tconsole.log(res)\n\t\t\tif (res.status.startsWith(\"4000\")) {\n\t\t\t\tthis.$api.msg(res.msg)\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}, 2000)\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.activity = res.data.activity\n\t\t\tthis.poster[0] = res.data.poster\n\t\t\tthis.isCollect = res.data.isCollect\n\t\t},\n\t\tcollect(id) {\n\t\t\tconsole.log(id)\n\t\t\tif (this.isCollect == true) {\n\t\t\t\tthis.unCollect(this.activity.id)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '取消成功'\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.goCollect(this.activity.id)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '取消成功'\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.isCollect = !this.isCollect\n\t\t},\n\t\tasync goCollect(id) {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/activity/collect/' + id\n\t\t\t})\n\t\t},\n\t\tasync unCollect(id) {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/activity/unCollect/' + id\n\t\t\t})\n\t\t},\n\t\tdeleteActivity() {\n\t\t\tif (this.user.id != this.poster[0].id && this.user.userType != 0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '权限不足，仅能删除您发布的活动~',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '返回',\n\t\t\t\t\tsuccess: (e) => {}\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst _this = this\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '删除提示',\n\t\t\t\tcontent: '删除不可恢复，确定删除吗？',\n\t\t\t\tshowCancel: true,\n\t\t\t\tconfirmText: '删除',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '删除中...'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t_this.delete()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tasync delete() {\n\t\t\tconst res = await this.$api.request({\n\t\t\t\turl: '/activity/delete/' + this.currActivityId\n\t\t\t})\n\t\t\tif (this.$api.prePage().loadData) {\n\t\t\t\tthis.$api.prePage().loadData(\"refresh\")\n\t\t\t}\n\t\t\tuni.hideLoading()\n\t\t\tif (res.status == 200) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '删除成功'\n\t\t\t\t})\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}, 1000)\n\t\t\t} else if (res.status.startsWith(\"2000\")) {\n\t\t\t\tthis.$api.msg(res.msg)\n\t\t\t} else {\n\t\t\t\tthis.$api.msg(\"服务器正忙~\")\n\t\t\t}\n\n\t\t},\n\t\teditActivity() {\n\t\t\tif (this.user.id != this.poster[0].id && this.user.userType != 0) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '权限不足，仅能编辑您发布的活动~',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\tconfirmText: '返回',\n\t\t\t\t\tsuccess: (e) => {}\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst _this = this\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '编辑提示',\n\t\t\t\tcontent: '您确定要编辑该活动吗？',\n\t\t\t\tshowCancel: true,\n\t\t\t\tconfirmText: '确定',\n\t\t\t\tsuccess: (e) => {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: '/pages/admin/post-activity?id=' + _this.currActivityId\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tparticipate() {\n\t\t\tconst flag = this.$common.greater(new Date(), new Date(this.activity.registerEndTime))\n\t\t\tconsole.log(flag)\n\t\t\tif (flag) {\n\t\t\t\tthis.$api.msg(\"报名已结束\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconsole.log(this.activity.teamSize)\n\t\t\tif (this.activity.teamSize <= 1) {\n\t\t\t\tthis.$api.msg(\"该活动为个人赛\")\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.navTo(\"/pages/team/team-list?id=\" + this.currActivityId + \"&&teamSize=\" + this.activity.teamSize)\n\t\t},\n\t\tnavTo(url) {\n\t\t\tuni.navigateTo({\n\t\t\t\turl\n\t\t\t})\n\t\t},\n\t},\n\tonPullDownRefresh() {\n\t\tthis.loadData()\n\t\tsetTimeout(() => {\n\t\t\tuni.stopPullDownRefresh();\n\t\t\tuni.showToast({\n\t\t\t\ttitle:'刷新成功'\n\t\t\t})\n\t\t}, 1000)\n\t},\n\tonShareAppMessage() {\n\t\treturn {\n\t\t\ttitle: this.activity.activityName\n\t\t}\n\t}\n}\n"],"sourceRoot":""}