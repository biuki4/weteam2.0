{"version":3,"sources":["webpack:///K:/HBuilderX/project/WeTeam/main.js","webpack:///K:/HBuilderX/project/WeTeam/pages/public/login.vue?33fa","webpack:///K:/HBuilderX/project/WeTeam/pages/public/login.vue?152b","webpack:///K:/HBuilderX/project/WeTeam/pages/public/login.vue?cf90","webpack:///K:/HBuilderX/project/WeTeam/pages/public/login.vue?210d","webpack:///K:/HBuilderX/project/WeTeam/pages/public/login.vue","webpack:///K:/HBuilderX/project/WeTeam/pages/public/login.vue?b3e8"],"names":["createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","loginType","isRotate","logoImage","phoneData","passData","logining","wButton","wInput","onShow","$api","logout","onLoad","methods","mapMutations","navTo","url","uni","navigateTo","chooseLoginType","type","console","log","navBack","navigateBack","wxLogin","_this","login","provider","success","login_res","code","getUserInfo","infoRes","showLoading","title","userInfo","JSON","parse","rawData","request","method","encryptedData","iv","failres","msg","hideLoading","then","res","status","user_token","setUserInfo","user","id","contentType","avatarUrl","syncRes","setStorageSync","$store","commit","prePage","loadData"],"mappings":";;;;wEAAA,qBAAmB,8BAEnB,sBACA,0C,mDACAA,EAAWC,a;;;;2DCJX,sQACIC,EADJ,8IASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wCACZ,aAAAF,E;;;;2GCvBf,+9B;;;;2GCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCRvB,snBAAgkB,eAAG,G;;;;0IC2CnkB,uB,8oCAIe,CACdC,KADc,WAEb,MAAO,CACNC,UAAW,GACXC,UAAU,EACVC,UAAW,GACXC,UAAW,GACXC,SAAU,GACVC,UAAU,IAGZjB,WAAY,CACXkB,UACAC,UAEDC,OAfc,WAgBbjB,KAAKkB,KAAKC,UAGXC,OAnBc,SAmBPzB,KAGP0B,QAAS,EAAF,IACH,IAAAC,cAAa,CAAC,UADX,CAGNC,MAHQ,SAGFC,GAELC,EAAIC,WAAW,CACdF,SAGFG,gBATQ,SASQC,GACfC,QAAQC,IAAIF,GACZ5B,KAAKS,UAAYmB,GAElBG,QAbQ,WAcPN,EAAIO,gBAELC,QAhBQ,WAiBPJ,QAAQC,IAAI,MACZ,IAAMI,EAAQlC,KACd6B,QAAQC,IAAI,OACZL,EAAIU,MAAM,CACTC,SAAU,SACVC,QAAS,SAACC,GACTT,QAAQC,IAAI,OACZD,QAAQC,IAAIQ,GAEZ,IAAIC,EAAOD,EAAUC,KAErBd,EAAIe,YAAY,CACfJ,SAAU,SACVC,QAAS,SAASI,GACjBhB,EAAIiB,YAAY,CACfC,MAAO,QAERd,QAAQC,IAAIW,GAEZ,IAAIG,EAAWC,KAAKC,MAAML,EAAQM,SAClClB,QAAQC,IAAIc,GAGZV,EAAMhB,KAAK8B,QAAQ,CAClBxB,IAAK,WACLyB,OAAQ,OACRzC,KAAM,CACL+B,KAAMA,EACN/B,KAAMiC,EAAQM,QACdG,cAAeT,EAAQS,cACvBC,GAAIV,EAAQU,MAEX,SAAAC,GACFlB,EAAMhB,KAAKmC,IAAI,UACf5B,EAAIO,eACJP,EAAI6B,iBACFC,MAAK,SAAAC,GAEP,GADA3B,QAAQC,IAAI0B,GACM,KAAdA,EAAIC,OAAe,CAEtB,IAAIC,EAAaF,EAAIhD,KAErB0B,EAAMhB,KAAKyC,YAAYD,GACvB7B,QAAQC,IAAI4B,GAEZxB,EAAMhB,KAAK8B,QAAQ,CAClBxB,IAAK,gBAAkBkC,EAAWE,KAAKC,GACvCZ,OAAQ,MACRa,YAAa,mBACbtD,KAAM,CACLuD,UAAWnB,EAASmB,aAEnBR,MAAK,SAAAS,GAEPN,EAAWE,KAAKG,UAAYnB,EAASmB,UACrCtC,EAAIwC,eAAe,WAAYP,GAC/BxB,EAAMgC,OAAOC,OAAO,QAAST,GAC7BxB,EAAMhB,KAAKyC,YAAYD,GACvB7B,QAAQC,IAAI4B,GAGRxB,EAAMhB,KAAKkD,UAAUC,UACxBnC,EAAMhB,KAAKkD,UAAUC,WAGtB5C,EAAI6B,cACJ7B,EAAIO,eACJE,EAAMhB,KAAKmC,IAAI,wBAIhBnB,EAAMhB,KAAKmC,IAAI,2B;;;;2DC7JxB,0kCAA6hC,eAAG,G","file":"pages/public/login.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/public/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=157a5c84&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"project/WeTeam/pages/public/login.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=157a5c84&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport wInput from '../../components/watch-login/watch-input.vue' //input\nimport wButton from '../../components/watch-login/watch-button.vue' //button\nimport {\n\tmapMutations\n} from 'vuex';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tloginType: '',\n\t\t\tisRotate: false, //是否加载旋转\n\t\t\tlogoImage: '', //logo图片 base64\n\t\t\tphoneData: '', //用户/电话\n\t\t\tpassData: '', //密码\n\t\t\tlogining: false\n\t\t}\n\t},\n\tcomponents: {\n\t\twButton,\n\t\twInput\n\t},\n\tonShow() {\n\t\tthis.$api.logout()\n\t\t// this.wxLogin()\n\t},\n\tonLoad(options) {\n\n\t},\n\tmethods: {\n\t\t...mapMutations(['login']),\n\n\t\tnavTo(url) {\n\t\t\t// this.$api.msg(`跳转到${url}`);\n\t\t\tuni.navigateTo({\n\t\t\t\turl\n\t\t\t})\n\t\t},\n\t\tchooseLoginType(type) {\n\t\t\tconsole.log(type)\n\t\t\tthis.loginType = type\n\t\t},\n\t\tnavBack() {\n\t\t\tuni.navigateBack();\n\t\t},\n\t\twxLogin() {\n\t\t\tconsole.log(\"登录\")\n\t\t\tconst _this = this\n\t\t\tconsole.log(\"---\")\n\t\t\tuni.login({\n\t\t\t\tprovider: 'weixin',\n\t\t\t\tsuccess: (login_res) => {\n\t\t\t\t\tconsole.log(\"---\")\n\t\t\t\t\tconsole.log(login_res)\n\t\t\t\t\t// 登录所需的code\n\t\t\t\t\tlet code = login_res.code;\n\t\t\t\t\t// 获取用户信息\n\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\tsuccess: function(infoRes) {\n\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\ttitle: '登录中'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tconsole.log(infoRes)\n\t\t\t\t\t\t\t// wx返回的用户信息\n\t\t\t\t\t\t\tlet userInfo = JSON.parse(infoRes.rawData)\n\t\t\t\t\t\t\tconsole.log(userInfo)\n\t\t\t\t\t\t\t// console.log(\"userInfo:   \" + userInfo.nickName)\n\t\t\t\t\t\t\t// 登录请求\n\t\t\t\t\t\t\t_this.$api.request({\n\t\t\t\t\t\t\t\turl: '/wxLogin',\n\t\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tcode: code,\n\t\t\t\t\t\t\t\t\tdata: infoRes.rawData,\n\t\t\t\t\t\t\t\t\tencryptedData: infoRes.encryptedData,\n\t\t\t\t\t\t\t\t\tiv: infoRes.iv\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, failres => {\n\t\t\t\t\t\t\t\t_this.$api.msg(\"请稍后再试~\")\n\t\t\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\tif (res.status == 200) {\n\t\t\t\t\t\t\t\t\t// user和token\n\t\t\t\t\t\t\t\t\tlet user_token = res.data\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t_this.$api.setUserInfo(user_token)\n\t\t\t\t\t\t\t\t\tconsole.log(user_token)\n\t\t\t\t\t\t\t\t\t// 异步修改用户信息，同步微信头像\n\t\t\t\t\t\t\t\t\t_this.$api.request({\n\t\t\t\t\t\t\t\t\t\turl: '/user/update/' + user_token.user.id,\n\t\t\t\t\t\t\t\t\t\tmethod: \"PUT\",\n\t\t\t\t\t\t\t\t\t\tcontentType: \"application/json\",\n\t\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t\tavatarUrl: userInfo.avatarUrl\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}).then(syncRes => {\n\t\t\t\t\t\t\t\t\t\t// 更新本地信息\n\t\t\t\t\t\t\t\t\t\tuser_token.user.avatarUrl = userInfo.avatarUrl\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('userInfo', user_token)\n\t\t\t\t\t\t\t\t\t\t_this.$store.commit('login', user_token)\n\t\t\t\t\t\t\t\t\t\t_this.$api.setUserInfo(user_token)\n\t\t\t\t\t\t\t\t\t\tconsole.log(user_token)\n\n\t\t\t\t\t\t\t\t\t\t// 调用上一个界面的loadData方法\n\t\t\t\t\t\t\t\t\t\tif (_this.$api.prePage().loadData) {\n\t\t\t\t\t\t\t\t\t\t\t_this.$api.prePage().loadData()\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t\t\t\t\t\t_this.$api.msg(\"欢迎使用WeTeam ~\")\n\t\t\t\t\t\t\t\t\t})\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// console.log(\"服务器正忙！请重试！\")\n\t\t\t\t\t\t\t\t\t_this.$api.msg(\"服务器正忙！请重试！\")\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}