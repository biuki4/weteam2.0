<view><hx-navbar vue-id="03ef08fd-1" title="队伍详情" color="#ffffff" background-color-linear-deg="45" bind:__l="__l"></hx-navbar><view class="game-container"><view class="game-title"><text>{{datas.team.name}}</text></view><view><view class="game-relative"><view class="game-relative-tit"><text class="iconfont icon-GroupCopy" style="color:#008de1;"></text>竞赛：</view><view data-event-opts="{{[['tap',[['goGameDetail',['$0'],['game.id']]]]]}}" class="margin-top10 game-poster" style="padding:0 0 20rpx 40rpx;font-size:36rpx;text-decoration:underline;" bindtap="__e">{{''+game.gameName+''}}</view></view><view class="time-box line"><text class="cuIcon-time" style="margin-right:10rpx;"></text><text>报名时间：</text><text>{{game.registerStartTime+" ~ "+game.registerEndTime}}</text></view><view class="time-box line"><text class="cuIcon-time" style="margin-right:10rpx;"></text><text>比赛时间：</text><text>{{game.gameStartTime+" ~ "+game.gameEndTime}}</text></view></view><view class="game-relative"><view class="game-relative-tit"><text class="iconfont icon-GroupCopy" style="color:#008de1;"></text>队伍介绍：</view><view class="margin-top10 game-poster" style="padding:0 40rpx 20rpx 40rpx;">{{''+(datas.team.brief||'还没有设置队伍介绍哦~')+''}}</view></view><view class="game-relative"><view class="game-relative-tit"><text class="iconfont icon-GroupCopy" style="color:#008de1;"></text>联系方式：</view><view class="margin-top10 game-poster" style="padding:0 40rpx 20rpx 40rpx;"><block wx:if="{{showContact}}"><view><block wx:if="{{datas.team.contact!=''}}"><view><text>{{datas.team.contact}}</text><uni-link vue-id="03ef08fd-2" href="{{datas.team.contact}}" text="点击复制, 记得说明来自weTeam小程序哦~" copyTips="已复制~" bind:__l="__l"></uni-link></view></block><block wx:else><text>还未设置，去个人信息看看~</text></block></view></block><block wx:else><view><text>申请后可查看~\n
							申请后将通过“i瓜大”公众号通知TA~</text></view></block></view></view><view class="game-relative"><view class="game-relative-tit"><text class="iconfont icon-GroupCopy" style="color:#008de1;"></text>队长：</view><view class="margin-top10 game-poster"><k-poster vue-id="03ef08fd-3" users="{{leader}}" data-event-opts="{{[['^click',[['userDetail']]]]}}" bind:click="__e" bind:__l="__l"></k-poster></view></view><view class="game-relative"><view class="game-relative-tit" style="position:relative;"><text class="iconfont icon-GroupCopy" style="color:#008de1;"></text><text>队伍情况：</text><text>{{"差 "+needNum+" 人"}}</text></view></view><view class="team-foot"><view><uni-collapse vue-id="03ef08fd-4" bind:__l="__l" vue-slots="{{['default']}}"><uni-collapse-item vue-id="{{('03ef08fd-5')+','+('03ef08fd-4')}}" title="{{'队员列表  ('+countMembers+')'}}" showAnimation thumb="https://www.iamk.top/static/icon/wodeduiwu.png" bind:__l="__l" vue-slots="{{['default']}}"><view style="background-color:#fff;"><block wx:if="{{datas.team.members.length!=0}}"><view><k-list vue-id="{{('03ef08fd-6')+','+('03ef08fd-5')}}" users="{{datas.team.members}}" data-event-opts="{{[['^click',[['memberOp']]]]}}" bind:click="__e" bind:__l="__l"></k-list></view></block><block wx:else><view style="padding:40rpx;color:#797979;">快来加入我们吧~</view></block></view></uni-collapse-item><uni-collapse-item vue-id="{{('03ef08fd-7')+','+('03ef08fd-4')}}" title="{{'申请列表  ('+countApplicant+')'}}" showAnimation thumb="https://www.iamk.top/static/icon/shenqing.png" bind:__l="__l" vue-slots="{{['default']}}"><view style="background-color:#fff;"><block wx:if="{{datas.team.applicant.length!=0}}"><view><k-list vue-id="{{('03ef08fd-8')+','+('03ef08fd-7')}}" users="{{datas.team.applicant}}" data-event-opts="{{[['^click',[['applicantOp']]]]}}" bind:click="__e" bind:__l="__l"></k-list></view></block><block wx:else><view style="padding:40rpx;color:#797979;">快来加入我们吧~</view></block></view></uni-collapse-item></uni-collapse><min-action-sheet class="vue-ref" vue-id="03ef08fd-9" data-ref="as" bind:__l="__l"></min-action-sheet></view></view><view class="{{['cu-modal',modalShow?'show':'']}}"><view class="cu-dialog"><view class="cu-bar bg-white justify-end"><view class="content">修改队伍信息</view><view data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-red"></text></view></view><view class="padding-xl" style="text-align:left;"><view class="cu-form-group"><input maxlength="30" placeholder="请填写队伍名称" name="input" data-event-opts="{{[['input',[['__set_model',['','teamName','$event',[]]]]]]}}" value="{{teamName}}" bindinput="__e"/></view><view class="cu-form-group"><input maxlength="30" placeholder="请填写联系方式" name="input" data-event-opts="{{[['input',[['__set_model',['','contact','$event',[]]]]]]}}" value="{{contact}}" bindinput="__e"/></view><view class="need-box"><text>招募总人数：</text><view style="margin-top:15rpx;"><uni-number-box vue-id="03ef08fd-10" min="{{datas.team.members.length==0?1:datas.team.members.length}}" max="{{game.teamSize}}" value="{{need==0?1:need}}" data-event-opts="{{[['^change',[['needChange']]]]}}" bind:change="__e" bind:__l="__l"></uni-number-box></view></view><block wx:if="{{modalShow==true}}"><view class="cu-form-group margin-top"><textarea maxlength="120" focus="false" placeholder="请填写您的队伍介绍~" data-event-opts="{{[['input',[['__set_model',['','teamBrief','$event',[]]]]]]}}" value="{{teamBrief}}" bindinput="__e"></textarea></view></block></view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="cu-btn line-green text-green" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['confirmModal',['$event']]]]]}}" class="cu-btn bg-green margin-left" bindtap="__e">修改</button></view></view></view></view><view class="game-footer"><view class="icons"><view><block wx:if="{{userInfo.user.id==datas.leader.id}}"><text data-event-opts="{{[['tap',[['showModal',['$event']]]]]}}" class="cuIcon-write" bindtap="__e"></text></block></view></view><view class="btns"><block wx:if="{{userInfo.user.id==datas.leader.id}}"><button data-event-opts="{{[['tap',[['dissolve',['$event']]]]]}}" class="cu-btn text-white bg-red" bindtap="__e">解散队伍</button></block><block wx:if="{{userInfo.user.id==datas.leader.id}}"><button data-event-opts="{{[['tap',[['finish',['$event']]]]]}}" class="cu-btn text-white bg-green" bindtap="__e">完成组队</button></block><block wx:else><block wx:if="{{datas.team.isMember}}"><button data-event-opts="{{[['tap',[['quit',['$0'],['datas.team.id']]]]]}}" class="cu-btn bg-green" bindtap="__e">退出</button></block><block wx:else><block wx:if="{{datas.team.isApplicant}}"><button data-event-opts="{{[['tap',[['unApply',['$0'],['datas.team.id']]]]]}}" class="cu-btn bg-blue" bindtap="__e">取消申请</button></block><block wx:else><button data-event-opts="{{[['tap',[['applyShowModal',['$event']]]]]}}" class="cu-btn" bindtap="__e">申请加入</button></block></block></block></view></view><view class="{{['cu-modal',applyModalShow==true?'show':'']}}"><view class="cu-dialog"><view class="cu-bar bg-white justify-end"><view class="content">申请理由</view><view data-event-opts="{{[['tap',[['applyHideModal',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-red"></text></view></view><view class="padding-xl" style="text-align:left;"><view class="cu-form-group margin-top"><textarea maxlength="100" placeholder="理由/自我介绍" data-event-opts="{{[['input',[['__set_model',['','applyModalInput','$event',[]]],['applyModalInputing',['$event']]]]]}}" value="{{applyModalInput}}" bindinput="__e"></textarea><block wx:if="{{applyClearIconShow}}"><text data-event-opts="{{[['tap',[['applyClearIcon',['$event']]]]]}}" class="cuIcon-roundclose" style="height:150rpx;line-height:150rpx;width:50rpx;" bindtap="__e"></text></block></view></view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['applyHideModal',['$event']]]]]}}" class="cu-btn line-green text-green" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['applyModalConfim',['$event']]]]]}}" class="cu-btn bg-green margin-left" bindtap="__e">确定</button></view></view></view></view></view></view>