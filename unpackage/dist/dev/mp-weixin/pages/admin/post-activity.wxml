<view class="page"><hx-navbar vue-id="0b62d973-1" title="{{editFlag==true?'编辑活动':'发布活动'}}" color="#ffffff" background-color-linear-deg="45" bind:__l="__l"></hx-navbar><view class="bg-white" style="padding:20rpx 0;"><view class="cu-steps"><block wx:for="{{stepList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="{{['cu-item',index>stepActive?'':'text-green']}}"><text class="{{[index>stepActive?'cuIcon-title':'cuIcon-'+item.cuIcon]}}"></text>{{''+item.name+''}}</view></block></view></view><block wx:if="{{stepActive==0}}"><view class="post-box1"><view class="cu-form-group"><view class="title required">活动名称</view><input placeholder="请输入活动名称" data-event-opts="{{[['input',[['__set_model',['','name','$event',[]]]]]]}}" value="{{name}}" bindinput="__e"/><block wx:if="{{name.length!=0}}"><text data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title required">主办方</view><input placeholder="请输入主办方名称, 如软件学院" data-event-opts="{{[['input',[['__set_model',['','source','$event',[]]]]]]}}" value="{{source}}" bindinput="__e"/><block wx:if="{{source.length!=0}}"><text data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title">通知链接</view><input placeholder="请输入通知链接" data-event-opts="{{[['input',[['__set_model',['','url','$event',[]]]]]]}}" value="{{url}}" bindinput="__e"/><block wx:if="{{url.length!=0}}"><text data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title">报名链接</view><input placeholder="请输入报名链接" data-event-opts="{{[['input',[['__set_model',['','registerUrl','$event',[]]]]]]}}" value="{{registerUrl}}" bindinput="__e"/><block wx:if="{{registerUrl.length!=0}}"><text data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view class="cu-form-group"><view class="title">官方群</view><input placeholder="如:QQ群123456" data-event-opts="{{[['input',[['__set_model',['','contact','$event',[]]]]]]}}" value="{{contact}}" bindinput="__e"/><block wx:if="{{contact.length!=0}}"><text data-event-opts="{{[['tap',[['e4',['$event']]]]]}}" class="cuIcon-roundclose" bindtap="__e"></text></block></view><view><view class="cu-form-group" style="display:flex;"><view class="title required">活动类别</view><input readonly disabled placeholder="请选择活动类别" data-event-opts="{{[['tap',[['e5',['$event']]]]]}}" value="{{category.category}}" bindtap="__e"/><text class="cuIcon-right"></text></view><van-popup vue-id="0b62d973-2" show="{{popupKindFlag}}" position="bottom" data-event-opts="{{[['^close',[['e6']]]]}}" data-com-type="wx" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><van-picker vue-id="{{('0b62d973-3')+','+('0b62d973-2')}}" columns="{{categories}}" show-toolbar value-key="name" data-event-opts="{{[['^cancel',[['closeKindPopup']]],['^confirm',[['chooseKind']]]]}}" data-com-type="wx" bind:cancel="__e" bind:confirm="__e" bind:__l="__l"></van-picker></van-popup></view><view class="time-box margin-top10"><view class="cu-form-group"><view class="title required">报名时间</view><picker mode="date" value="{{date1}}" start="{{startTime}}" end="{{endTime}}" data-event-opts="{{[['change',[['Date1Change',['$event']]]]]}}" bindchange="__e"><view style="color:#7d7d7d;text-align:center;">{{date1||'请选择'}}</view></picker><text style="text-align:left;">至</text><picker mode="date" value="{{date2}}" start="{{startTime}}" end="{{endTime}}" data-event-opts="{{[['change',[['Date2Change',['$event']]]]]}}" bindchange="__e"><view style="color:#7d7d7d;text-align:right;">{{date2||'请选择'}}</view></picker></view><view class="post-tip margin-top10" style="margin-left:20rpx;"><text style="color:#f00;margin-right:15rpx;">*</text><text>{{'时间待定请选择'+startTime}}</text></view></view></view></block><block wx:if="{{stepActive==1}}"><view class="post-box2 margin-top10"><my-editor vue-id="0b62d973-4" html="{{activityContent}}" data-event-opts="{{[['^save',[['saveEditor']]],['^reset',[['resetEditor']]]]}}" bind:save="__e" bind:reset="__e" bind:__l="__l"></my-editor></view></block><block wx:if="{{stepActive==2}}"><view class="post-box3"><block wx:if="{{$root.m0}}"><view class="box3-uploadPic-box"><view class="uploadPic-tit required">上传图片</view><view class="box3-uploadPic"><van-uploader vue-id="0b62d973-5" sizeType="compressed" preview-full-image upload-text="上传活动海报" max-count="1" file-list="{{picList}}" data-event-opts="{{[['^afterRead',[['afterReadPic']]]]}}" data-com-type="wx" bind:afterRead="__e" bind:__l="__l"></van-uploader></view></view></block><block wx:if="{{!$root.m1}}"><view><uni-swipe-action vue-id="0b62d973-6" bind:__l="__l" vue-slots="{{['default']}}"><uni-swipe-action-item vue-id="{{('0b62d973-7')+','+('0b62d973-6')}}" options="{{options}}" data-event-opts="{{[['^click',[['previewOnClick']]],['^change',[['previewChange']]]]}}" bind:click="__e" bind:change="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="preview-picture animated bounceInRight"><image src="{{picList}}" alt class="_img"></image></view></uni-swipe-action-item></uni-swipe-action><view style="text-align:right;margin-top:5rpx;">（滑动删除）</view></view></block></view></block><view class="box4 margin-top10"><block wx:if="{{stepActive==3}}"><view><k-detail vue-id="0b62d973-8" list="{{activity}}" poster="{{poster}}" isPreview="true" bind:__l="__l"></k-detail></view></block></view><view class="foot"><block wx:if="{{stepActive!=3}}"><view class="foot-option"><block wx:if="{{stepActive!=0&&stepActive!=3}}"><view data-event-opts="{{[['tap',[['lastStep',['$event']]]]]}}" class="option-item item-return" bindtap="__e"><text class="cuIcon-back"></text><text>返回</text></view></block><block wx:if="{{stepActive<2}}"><view data-event-opts="{{[['tap',[['nextStep',['$event']]]]]}}" class="option-item item-next" bindtap="__e"><text>下一步</text><text class="cuIcon-right"></text></view></block><block wx:if="{{stepActive==2}}"><view data-event-opts="{{[['tap',[['postActivity',['$event']]]]]}}" class="option-item item-next" bindtap="__e"><text>发布</text><text class="cuIcon-right"></text></view></block></view></block><block wx:if="{{stepActive==3}}"><view class="padding flex flex-direction op-group"><button data-event-opts="{{[['tap',[['editActivity',['$event']]]]]}}" class="cu-btn lg bg-grey" style="color:#fff;" bindtap="__e">编辑</button><button data-event-opts="{{[['tap',[['deleteActivity',['$event']]]]]}}" class="cu-btn lg bg-red" style="color:#fff;" bindtap="__e">删除</button><button data-event-opts="{{[['tap',[['finsh',['$event']]]]]}}" class="cu-btn lg" style="background-color:#55aaff;color:#fff;" bindtap="__e">完成</button></view></block></view></view>