(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/post-activity"],{252:
/*!************************************************************************************!*\
  !*** K:/HBuilderX/project/WeTeam/main.js?{"page":"pages%2Fadmin%2Fpost-activity"} ***!
  \************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){e(/*! uni-pages */4),e(/*! @dcloudio/uni-stat */5);n(e(/*! vue */2));var i=n(e(/*! ./pages/admin/post-activity.vue */253));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},253:
/*!*****************************************************************!*\
  !*** K:/HBuilderX/project/WeTeam/pages/admin/post-activity.vue ***!
  \*****************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var n=e(/*! ./post-activity.vue?vue&type=template&id=c171c49e& */254),s=e(/*! ./post-activity.vue?vue&type=script&lang=js& */256);for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e(/*! ./post-activity.vue?vue&type=style&index=0&lang=scss& */258);var c,a=e(/*! ../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */16),r=Object(a["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],c);r.options.__file="project/WeTeam/pages/admin/post-activity.vue",i["default"]=r.exports},254:
/*!************************************************************************************************!*\
  !*** K:/HBuilderX/project/WeTeam/pages/admin/post-activity.vue?vue&type=template&id=c171c49e& ***!
  \************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,i,e){"use strict";e.r(i);var n=e(/*! -!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./post-activity.vue?vue&type=template&id=c171c49e& */255);e.d(i,"render",(function(){return n["render"]})),e.d(i,"staticRenderFns",(function(){return n["staticRenderFns"]})),e.d(i,"recyclableRender",(function(){return n["recyclableRender"]})),e.d(i,"components",(function(){return n["components"]}))},255:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!K:/HBuilderX/project/WeTeam/pages/admin/post-activity.vue?vue&type=template&id=c171c49e& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,i,e){"use strict";var n;e.r(i),e.d(i,"render",(function(){return s})),e.d(i,"staticRenderFns",(function(){return c})),e.d(i,"recyclableRender",(function(){return o})),e.d(i,"components",(function(){return n}));var s=function(){var t=this,i=t.$createElement,e=(t._self._c,t.fileIsEmpty()),n=t.fileIsEmpty();t._isMounted||(t.e0=function(i){t.name=""},t.e1=function(i){t.source=""},t.e2=function(i){t.url=""},t.e3=function(i){t.registerUrl=""},t.e4=function(i){t.contact=""},t.e5=function(i){t.popupKindFlag=!0},t.e6=function(i){t.popupKindFlag=!1}),t.$mp.data=Object.assign({},{$root:{m0:e,m1:n}})},o=!1,c=[];s._withStripped=!0},256:
/*!******************************************************************************************!*\
  !*** K:/HBuilderX/project/WeTeam/pages/admin/post-activity.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var n=e(/*! -!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./post-activity.vue?vue&type=script&lang=js& */257),s=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=s.a},257:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!K:/HBuilderX/project/WeTeam/pages/admin/post-activity.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=s(e(/*! ./node_modules/@babel/runtime/regenerator */26));function s(t){return t&&t.__esModule?t:{default:t}}function o(t,i,e,n,s,o,c){try{var a=t[o](c),r=a.value}catch(u){return void e(u)}a.done?i(r):Promise.resolve(r).then(n,s)}function c(t){return function(){var i=this,e=arguments;return new Promise((function(n,s){var c=t.apply(i,e);function a(t){o(c,n,s,a,r,"next",t)}function r(t){o(c,n,s,a,r,"throw",t)}a(void 0)}))}}var a=function(){e.e(/*! require.ensure | components/other/robin-editor/editor */"components/other/robin-editor/editor").then(function(){return resolve(e(/*! @/components/other/robin-editor/editor.vue */545))}.bind(null,e)).catch(e.oe)},r=function(){e.e(/*! require.ensure | components/uni-ui/uni-swipe-action/uni-swipe-action */"components/uni-ui/uni-swipe-action/uni-swipe-action").then(function(){return resolve(e(/*! @/components/uni-ui/uni-swipe-action/uni-swipe-action.vue */552))}.bind(null,e)).catch(e.oe)},u=function(){Promise.all(/*! require.ensure | components/uni-ui/uni-swipe-action-item/uni-swipe-action-item */[e.e("common/vendor"),e.e("components/uni-ui/uni-swipe-action-item/uni-swipe-action-item")]).then(function(){return resolve(e(/*! @/components/uni-ui/uni-swipe-action-item/uni-swipe-action-item.vue */557))}.bind(null,e)).catch(e.oe)},l=function(){e.e(/*! require.ensure | components/other/dynamic-tags/dynamic-tags */"components/other/dynamic-tags/dynamic-tags").then(function(){return resolve(e(/*! @/components/other/dynamic-tags/dynamic-tags.vue */567))}.bind(null,e)).catch(e.oe)},h=function(){Promise.all(/*! require.ensure | components/k-ui/k-activity/k-detail */[e.e("common/vendor"),e.e("components/k-ui/k-activity/k-detail")]).then(function(){return resolve(e(/*! @/components/k-ui/k-activity/k-detail.vue */574))}.bind(null,e)).catch(e.oe)},d=function(){e.e(/*! require.ensure | components/uni-ui/uni-number-box/uni-number-box */"components/uni-ui/uni-number-box/uni-number-box").then(function(){return resolve(e(/*! @/components/uni-ui/uni-number-box/uni-number-box.vue */468))}.bind(null,e)).catch(e.oe)},f={components:{myEditor:a,uniSwipeAction:r,uniSwipeActionItem:u,dynamicTags:l,kDetail:h,uniNumberBox:d},data:function(){return{name:"",source:"",url:"",registerUrl:"",contact:"",date1:"",date2:"",activityContent:"",category:"",categories:[],categoryIds:[],popupKindFlag:!1,stepActive:0,stepList:[{cuIcon:"usefullfill",name:"基本信息"},{cuIcon:"radioboxfill",name:"活动描述"},{cuIcon:"radioboxfill",name:"上传附件"},{cuIcon:"roundcheckfill",name:"确认发布"}],activityWayRadio:"1",num:1,membersShowFlag:!1,picList:[],options:[{text:"删除",style:{backgroundColor:"#dd524d"}}],startTime:"",endTime:"",activity:[],poster:[],curActivityId:"",user:"",editFlag:!1}},mounted:function(){this.user=this.$store.getters.getUserInfo},onLoad:function(t){void 0!=t.id&&(console.log(t.id),this.curActivityId=t.id,this.editFlag=!0,this.loadData()),this.getCategories(),this.getStartDate(),this.getEndDate()},methods:{saveEditor:function(t){this.activityContent=t.htmlData},resetEditor:function(){this.activityContent=""},Date1Change:function(t){this.date1=t.detail.value},Date2Change:function(t){this.date2=t.detail.value},test:function(){console.log("this.name: "+this.name),console.log("this.source: "+this.source),console.log("this.url: "+this.url),console.log("this.registerUrl: "+this.registerUrl),console.log("this.category: "+JSON.stringify(this.category)),console.log("this.teamSize: "+this.num),console.log(this.date1),console.log(this.date2),console.log("this.activityContent: "+this.activityContent),console.log("this.picList: "+this.picList)},loadData:function(){var t=c(n.default.mark((function t(){var i,e;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.request({url:"/activity/"+this.curActivityId});case 2:i=t.sent,console.log(i),200==i.status?(this,e=i.data.activity,this.name=e.activityName,this.source=e.activitySource,this.url=e.activityUrl,this.registerUrl=e.registerUrl,this.category=e.activityCategory,e.teamSize>1&&(this.activityWayRadio="2",this.membersShowFlag=!0),this.num=e.teamSize,this.date1=e.registerStartTime,this.date2=e.registerEndTime,this.activityContent=e.activityContent,this.contact=e.contact,this.picList.push(e.posterUrl)):this.$api.msg("服务器正忙~");case 5:case"end":return t.stop()}}),t,this)})));function i(){return t.apply(this,arguments)}return i}(),getStartDate:function(){this.startTime="2018-01-01"},getEndDate:function(){var t=new Date,i=t.getFullYear()+2,e=i+"-01-01";this.endTime=e},chooseKind:function(t){console.log(t);var i=t.detail,e=i.value,n=i.index;this.category={id:this.categoryIds[n],category:e},this.popupKindFlag=!1},closeKindPopup:function(){this.popupKindFlag=!1},onChangeActivityWay:function(t){this.activityWayRadio=String(t.detail),2==this.activityWayRadio?this.membersShowFlag=!0:(this.membersShowFlag=!1,this.num=1)},change:function(t){this.num=t},nextStep:function(){if(0==this.stepActive){if(""==this.name)return void this.$api.msg("请填写活动名称~");if(""==this.source)return void this.$api.msg("请填写主办方~");if(""==this.category)return void this.$api.msg("请选择活动类别~");if(""==this.date1)return void this.$api.msg("请选择报名开始时间~");if(""==this.date2)return void this.$api.msg("请选择报名结束时间~")}1!=this.stepActive||""!=this.activityContent?this.stepActive=this.stepActive>=4?this.stepActive:this.stepActive+1:this.$api.msg("请填写活动内容并保存~")},postActivity:function(){if(0!=this.picList.length){var i=this;t.showLoading({title:"发布中..."}),setTimeout((function(){""==i.curActivityId?i.post("/activity/add"):i.post("/activity/update")}),1e3)}else this.$api.msg("请上传活动海报~")},finsh:function(){t.navigateBack()},deleteActivity:function(){if(this.user.userType>=3)t.showModal({title:"提示",content:"权限不足，无法删除~",showCancel:!1,confirmText:"返回",success:function(t){}});else{var i=this;t.showModal({title:"删除提示",content:"删除不可恢复，确定删除吗？",showCancel:!0,confirmText:"删除",success:function(e){e.confirm&&(t.showLoading({title:"删除中..."}),i.delete())}})}},delete:function(){var i=c(n.default.mark((function i(){var e;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,this.$api.request({url:"/activity/delete/"+this.curActivityId});case 2:e=i.sent,t.hideLoading(),200==e.status?(this.$api.msg("删除成功"),t.navigateBack()):2001==e.status||2002==e.status?this.$api.msg(e.msg):this.$api.msg("系统繁忙");case 5:case"end":return i.stop()}}),i,this)})));function e(){return i.apply(this,arguments)}return e}(),editActivity:function(){var i=this;if(this.user.userType>=3)t.showModal({title:"提示",content:"权限不足,无法编辑~",showCancel:!1,confirmText:"返回",success:function(t){}});else{t.showModal({title:"编辑提示",content:"您确定要重新编辑吗？",showCancel:!0,confirmText:"确定",success:function(t){t.confirm&&(i.editFlag=!0,i.stepActive=0)}})}},post:function(){var i=c(n.default.mark((function i(e){var s,o=this;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return this,i.next=3,this.$api.request({url:e,contentType:"application/json",method:"POST",data:{id:this.curActivityId,activityCategory:this.category,activityName:this.name,posterUrl:this.picList[0],activityContent:this.activityContent,contact:this.contact,registerStartTime:this.date1,registerEndTime:this.date2,activitySource:this.source,activityUrl:this.url,registerUrl:this.registerUrl,teamSize:this.num}});case 3:s=i.sent,console.log(s),console.log(s.status),200==s.status?(console.log("activity发布成功"),this.curActivityId=s.data.id,this.picList[0].startsWith("http://tmp")||this.picList[0].startsWith("wxfile:")?(console.log("更新图片"),this.upload()):(t.hideLoading(),this.$api.msg("发布成功~"),setTimeout((function(){t.showLoading({title:"预览中..."}),o.getActivity(o.curActivityId)}),1e3))):this.$api.msg("服务器正忙~");case 7:case"end":return i.stop()}}),i,this)})));function e(t){return i.apply(this,arguments)}return e}(),getActivity:function(){var i=c(n.default.mark((function i(e){var s,o=this;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(e),i.next=3,this.$api.request({url:"/activity/"+e});case 3:s=i.sent,200==s.status&&(this.activity=s.data.activity,this.poster[0]=s.data.poster,setTimeout((function(){o.stepActive=3,t.hideLoading()}),1e3));case 5:case"end":return i.stop()}}),i,this)})));function e(t){return i.apply(this,arguments)}return e}(),lastStep:function(){this.stepActive=this.stepActive<=4?this.stepActive-1:this.stepActive},afterReadPic:function(t){var i=t.detail.file;this.picList.push(i.path)},upload:function(){var i=this;console.log(this.picList),t.uploadFile({url:this.$config.def().baseUrl+"/upload/uploadActivity/"+this.curActivityId,filePath:i.picList[0],name:"file",formData:{},success:function(e){var n=JSON.parse(e.data);200==n.status?(t.hideLoading(),i.$api.msg("发布成功~"),setTimeout((function(){t.showLoading({title:"预览中..."}),i.getActivity(i.curActivityId)}),1e3)):i.$api.msg("服务器正忙~")},fail:function(){t.hideLoading(),i.$api.msg("服务器正忙~")}})},beforeRead:function(t){},fileIsEmpty:function(){return 0==this.picList.length},previewOnClick:function(t){0==t.index&&(this.picList=[])},previewChange:function(t){},getCategories:function(){var t=c(n.default.mark((function t(){var i,e;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.request({url:"/activity/category"});case 2:i=t.sent,console.log(i),e=this,i.data.forEach((function(t){e.categories.push(t.category),e.categoryIds.push(t.id)}));case 6:case"end":return t.stop()}}),t,this)})));function i(){return t.apply(this,arguments)}return i}()}};i.default=f}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},258:
/*!***************************************************************************************************!*\
  !*** K:/HBuilderX/project/WeTeam/pages/admin/post-activity.vue?vue&type=style&index=0&lang=scss& ***!
  \***************************************************************************************************/
/*! no static exports found */function(t,i,e){"use strict";e.r(i);var n=e(/*! -!../../../../plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!../../../../plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./post-activity.vue?vue&type=style&index=0&lang=scss& */259),s=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=s.a},259:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-1!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!K:/HBuilderX/project/WeTeam/pages/admin/post-activity.vue?vue&type=style&index=0&lang=scss& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,i,e){}},[[252,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/admin/post-activity.js.map